From c3f5a767c053becfa8abce6d8cc5fa308f94249b Mon Sep 17 00:00:00 2001
From: Jean-Christophe Trotin <jean-christophe.trotin@st.com>
Date: Wed, 15 Nov 2023 16:14:07 +0100
Subject: [PATCH] Device tree modifications for the logic analyzer demo

---
 arch/arm/boot/dts/stm32mp15xx-dkx.dtsi | 26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)

diff --git a/arch/arm/boot/dts/stm32mp15xx-dkx.dtsi b/arch/arm/boot/dts/stm32mp15xx-dkx.dtsi
index b1f02b092..2febeaccc 100644
--- a/arch/arm/boot/dts/stm32mp15xx-dkx.dtsi
+++ b/arch/arm/boot/dts/stm32mp15xx-dkx.dtsi
@@ -167,6 +167,29 @@ &crc1 {
 	status = "okay";
 };
 
+&dma2 {
+	status = "disabled";
+};
+
+&m4_dma2 {
+	status = "okay";
+};
+
+&dmamux1{
+	dma-masters = <&dma1>;
+	dma-channels = <8>;
+
+	status = "okay";
+};
+
+&timers2{
+	status = "disabled";
+};
+
+&m4_timers2{
+	status = "okay";
+};
+
 &dts {
 	status = "okay";
 };
@@ -511,6 +534,9 @@ &m4_rproc {
 	interrupts = <68 1>;
 	wakeup-source;
 	status = "okay";
+	m4_system_resources{
+		status = "okay";
+	};
 };
 
 &pwr_regulators {
-- 
2.25.1

